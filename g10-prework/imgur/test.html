<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>

<div class="col-md-6 col-md-offset-3">
    <h2>Imgur Image Search</h2>
    <p>Enter image ID:</p>
<input id="imgId"  />
<button  onclick="loadImg()">Get image and comments</button>

<body>
<div id="image"></div>
<ul id="list">
</ul>
    <script>
      function loadImg() {
        console.log('loadDoc');
              var CLIENT_ID = "fef7bcd5bbdf515";
              var USER_NAME = "Kewalshah2727";
              var imgId = document.getElementById('imgId').value;
              console.log("CLIENT_ID: "+CLIENT_ID)
              console.log("USER_NAME: "+USER_NAME)
              refreshElement('image');
              $.ajax({
                    url:"https://api.imgur.com/3/gallery/"+ imageId,
                    method: 'GET',
                    headers: {
                      Authorization: 'Client-ID ' + CLIENT_ID,
                      Accept: 'application/json'
                    },
                    success: function(result) {
                      console.log("Result Obtained",result);
                      result.data.images.map(i => {
                        var imageElement = new Image(i.width, i.height);
                        imageElement.src = i.link;
                        document.getElementById("image").appendChild(imageElement);
                      })
                    },
                    error: function(a, b, c){
                      console.log('Failed to load imgur', a.status, a.responseText);
                    } 
              });
              loadComment();  
      }
      function loadComment(comment) {
        console.log(comment);
              var CLIENT_ID = "fef7bcd5bbdf515";
              var USER_NAME = "Kewalshah2727";
              var imageId = document.getElementById('imgId').value;
              refreshElement('list');
              $.ajax({
                  url: 'https://api.imgur.com/3/gallery/'+ imgId +'/comments',
                  method: 'GET',
                  headers: {
                    Authorization: 'Client-ID ' + CLIENT_ID,
                    Accept: 'application/json'
                  },
                  success: function(result) {

                  console.log("Result Obtained",result)
                  result.data.map(
                    e => {
                        let li = document.createElement("LI");
                        let text = document.createTextNode(e.comment)
                        li.appendChild(text); 
                        document.getElementById("list").appendChild(li)
                      }
                    )
                  },
                  error: function(a, b, c){
                    console.log('Failed to load imgur', a.status, a.responseText);
                  }
              });
              if(comment){
                let li = document.createElement("LI");
                let text = document.createTextNode(comment)
                li.appendChild(text); 
                document.getElementById("list").appendChild(li)
              }
      }  

	       function refreshElement(element){
          var root = document.getElementById(element)
          while( root.firstChild ){
                root.removeChild( root.firstChild );
          }
      }
    </script>   

	  
            <a href="#!/login" class="btn btn-link">Logout</a>
</body>
